{"version":3,"file":"2-54907ff4.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_page.ts.js","../../../.svelte-kit/adapter-node/entries/pages/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/2.js"],"sourcesContent":["const ssr = false;\nexport {\n  ssr\n};\n","import { e as error } from \"../../chunks/index.js\";\nimport { d as db } from \"../../chunks/db.server.js\";\nasync function load({ params, depends }) {\n  depends(\"app:sample\");\n  try {\n    const sample = await db.sample.findFirst({\n      orderBy: {\n        id: \"desc\"\n        // Replace 'fieldName' with the field you want to sort by\n      }\n    });\n    const phases = await db.phaseData.findMany({\n      where: {\n        sampleId: sample?.id\n      }\n    });\n    const powerHistory = await get_power();\n    const digital_outputs = await db.digitalOutput.findMany();\n    return {\n      measurement: {\n        sample,\n        phases,\n        powerHistory,\n        digital_outputs\n      }\n    };\n  } catch (err) {\n    throw error(500, err);\n  }\n}\nasync function get_power() {\n  const now = /* @__PURE__ */ new Date();\n  now.setHours(now.getHours() - 6);\n  const samples = await db.sample.findMany({\n    take: 100,\n    orderBy: {\n      id: \"desc\"\n    }\n  });\n  const sampleIds = samples.map((sample) => sample.id);\n  const phases = await db.phaseData.findMany({\n    where: {\n      sampleId: {\n        in: sampleIds\n      }\n    },\n    orderBy: {\n      id: \"asc\"\n    }\n  });\n  const powerHistory = { 1: [], 2: [], 3: [] };\n  phases.forEach(function(phase) {\n    powerHistory[phase.phase].push(Math.round(phase.power));\n  });\n  return powerHistory;\n}\nexport {\n  load\n};\n","import * as universal from '../entries/pages/_page.ts.js';\nimport * as server from '../entries/pages/_page.server.ts.js';\n\nexport const index = 2;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/_page.svelte.js')).default;\nexport { universal };\nexport const universal_id = \"src/routes/+page.ts\";\nexport { server };\nexport const server_id = \"src/routes/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/2.a8130409.js\",\"_app/immutable/chunks/scheduler.16cbcee3.js\",\"_app/immutable/chunks/index.cb8f8d94.js\",\"_app/immutable/chunks/singletons.5c32fdbe.js\"];\nexport const stylesheets = [\"_app/immutable/assets/2.30edd2f1.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;AAAA,MAAM,GAAG,GAAG,KAAK;;;;;;;ACEjB,eAAe,IAAI,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE;AACzC,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC;AACxB,EAAE,IAAI;AACN,IAAI,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC;AAC7C,MAAM,OAAO,EAAE;AACf,QAAQ,EAAE,EAAE,MAAM;AAClB;AACA,OAAO;AACP,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC;AAC/C,MAAM,KAAK,EAAE;AACb,QAAQ,QAAQ,EAAE,MAAM,EAAE,EAAE;AAC5B,OAAO;AACP,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,YAAY,GAAG,MAAM,SAAS,EAAE,CAAC;AAC3C,IAAI,MAAM,eAAe,GAAG,MAAM,EAAE,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;AAC9D,IAAI,OAAO;AACX,MAAM,WAAW,EAAE;AACnB,QAAQ,MAAM;AACd,QAAQ,MAAM;AACd,QAAQ,YAAY;AACpB,QAAQ,eAAe;AACvB,OAAO;AACP,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,GAAG,EAAE;AAChB,IAAI,MAAM,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC1B,GAAG;AACH,CAAC;AACD,eAAe,SAAS,GAAG;AAC3B,EAAE,MAAM,GAAG,mBAAmB,IAAI,IAAI,EAAE,CAAC;AACzC,EAAE,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;AACnC,EAAE,MAAM,OAAO,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC3C,IAAI,IAAI,EAAE,GAAG;AACb,IAAI,OAAO,EAAE;AACb,MAAM,EAAE,EAAE,MAAM;AAChB,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,EAAE,CAAC,CAAC;AACvD,EAAE,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC;AAC7C,IAAI,KAAK,EAAE;AACX,MAAM,QAAQ,EAAE;AAChB,QAAQ,EAAE,EAAE,SAAS;AACrB,OAAO;AACP,KAAK;AACL,IAAI,OAAO,EAAE;AACb,MAAM,EAAE,EAAE,KAAK;AACf,KAAK;AACL,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,YAAY,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;AAC/C,EAAE,MAAM,CAAC,OAAO,CAAC,SAAS,KAAK,EAAE;AACjC,IAAI,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;AAC5D,GAAG,CAAC,CAAC;AACL,EAAE,OAAO,YAAY,CAAC;AACtB;;;;;;;ACpDY,MAAC,KAAK,GAAG,EAAE;AACvB,IAAI,eAAe,CAAC;AACR,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAkC,CAAC,EAAE,QAAQ;AAExG,MAAC,YAAY,GAAG,sBAAsB;AAEtC,MAAC,SAAS,GAAG,6BAA6B;AAC1C,MAAC,OAAO,GAAG,CAAC,oCAAoC,CAAC,6CAA6C,CAAC,yCAAyC,CAAC,8CAA8C,EAAE;AACzL,MAAC,WAAW,GAAG,CAAC,sCAAsC,EAAE;AACxD,MAAC,KAAK,GAAG;;;;"}